<?php

namespace App\Helpers;

use App\Enums\MetricType;
use App\Domains\HealthProfile\Projections\Metric;

class Helpers
{
    public static function prettyString(string $value): string
    {
        return implode(' ', array_map(fn($piece) => ucfirst($piece), explode('_', $value)));
    }

    public static function presentMetric(Metric $metric): string
    {
        switch ($metric->type) {
            case MetricType::BLOOD_PRESSURE:
                return ($metric->value['systolic'] ?? '') . '/' . ($metric->value['diastolic'] ?? '') . ' mmHg';
            case MetricType::HEART_RATE:
                return ($metric->value['bpm'] ?? '') . ' BPM';
            case MetricType::BLOOD_SUGAR:
                return ($metric->value['level'] ?? '') . ' mg/dL';
            case MetricType::SPO2:
                return ($metric->value['spo2'] ?? '') . '%';
            case MetricType::BREASTFEEDING:
                $duration = $metric->value['duration'] ?? '';
                $side = ucfirst($metric->value['side'] ?? '');
                return $duration . ' min (' . __($side) . ')';
            case MetricType::WEIGHT:
                return ($metric->value['weight'] ?? '') . ' kg';
            case MetricType::TEMPERATURE:
                return ($metric->value['temperature'] ?? '') . ' Â°C';
            default:
                return json_encode($metric->value);
        }
    }

    public static function metricIcon(MetricType $metricType, int $size = 8): string
    {
        return match ($metricType) {
            MetricType::BLOOD_PRESSURE => <<<HTML
<svg class="size-$size" viewBox="0 0 48 48" fill="none" xmlns="http://www.w3.org/2000/svg">
    <path fill-rule="evenodd" clip-rule="evenodd" d="M14.7692 7C17.6938 7 20.5234 8.15414 22.621 10.0472C22.972 10.364 23.3025 10.7015 23.6095 11.0577L24 11.5107L24.3905 11.0577C24.6975 10.7015 25.028 10.364 25.379 10.0472C27.4766 8.15414 30.3062 7 33.2308 7C39.2655 7 44 11.6778 44 17.6404C44 19.9697 43.3279 22.1778 42.0602 24.418C41.6463 23.8365 41.1746 23.2989 40.6535 22.8137C41.5639 21.0343 42 19.35 42 17.6404C42 12.805 38.1837 9 33.2308 9C30.4134 9 27.6769 10.308 25.9054 12.3634L25.9053 12.3635L25.5149 12.8165L24 14.5739L22.4851 12.8165L22.0947 12.3635L22.0946 12.3634C20.3231 10.308 17.5866 9 14.7692 9C9.81631 9 6 12.805 6 17.6404C6 20.6398 7.34243 23.5609 10.2324 27.0519L10.2324 27.0519C13.1506 30.577 17.3716 34.3656 22.7047 39.1438L22.7083 39.1471L22.7401 39.1754L22.7422 39.1775L24.0064 40.3146L25.2937 39.1654L25.2949 39.1644L25.2957 39.1637L25.2976 39.162L25.3474 39.1173C25.6912 38.8086 26.0305 38.504 26.365 38.2034C26.8626 38.6645 27.4049 39.078 27.9848 39.4366C27.5581 39.8203 27.1246 40.2095 26.6846 40.6046L26.6836 40.6055L26.6306 40.653L26.6294 40.654L24.0013 43L21.3709 40.6341L21.3702 40.6334C16.0777 35.8917 11.7264 31.993 8.69183 28.3273C5.6632 24.6688 4 21.3045 4 17.6404C4 11.6778 8.7345 7 14.7692 7Z" fill="#fff"/>
    <path fill-rule="evenodd" clip-rule="evenodd" d="M33.5 39C38.1944 39 42 35.1944 42 30.5C42 25.8056 38.1944 22 33.5 22C28.8056 22 25 25.8056 25 30.5C25 35.1944 28.8056 39 33.5 39ZM33.5 41C39.299 41 44 36.299 44 30.5C44 24.701 39.299 20 33.5 20C27.701 20 23 24.701 23 30.5C23 36.299 27.701 41 33.5 41Z" fill="#fff"/>
    <path d="M36 30.5C36 31.8807 34.8807 33 33.5 33C32.1193 33 31 31.8807 31 30.5C31 29.1193 32.1193 28 33.5 28C34.8807 28 36 29.1193 36 30.5Z" fill="#fff"/>
    <path d="M28.3219 26.9432C27.9292 26.5505 27.9292 25.9138 28.3219 25.5211C28.7146 25.1284 29.3513 25.1284 29.744 25.5211L33.9788 29.7558C34.3715 30.1486 34.3715 30.7853 33.9788 31.178C33.586 31.5707 32.9493 31.5707 32.5566 31.178L28.3219 26.9432Z" fill="#fff"/>
</svg>
HTML,
            MetricType::HEART_RATE => <<<HTML
<svg class="size-$size" viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg">
    <path d="M21 11.9998H18.6361C17.9781 11.9998 17.6491 11.9998 17.3578 12.1296C17.0665 12.2593 16.8463 12.504 16.4059 12.9932L15.3767 14.1369C15.0154 14.5382 14.8348 14.7389 14.6057 14.734C14.3766 14.7291 14.2049 14.521 13.8616 14.1048L10.3334 9.82819C10.0133 9.44017 9.85321 9.24615 9.63599 9.23311C9.41877 9.22006 9.23663 9.39352 8.87237 9.74044L7.36897 11.1723C6.93986 11.5809 6.7253 11.7853 6.45709 11.8926C6.18887 11.9998 5.89258 11.9998 5.3 11.9998H3" stroke="#fff" stroke-width="1.5" stroke-linecap="round"/>
    <path d="M8.96173 18.9108L9.42605 18.3219L8.96173 18.9108ZM12 5.5006L11.4596 6.0207C11.601 6.1676 11.7961 6.2506 12 6.2506C12.2039 6.2506 12.399 6.1676 12.5404 6.0207L12 5.5006ZM15.0383 18.9109L15.5026 19.4999V19.4999L15.0383 18.9109ZM12 20.4859L12 19.7359L12 20.4859ZM2.65666 13.3964C2.87558 13.748 3.33811 13.8556 3.68974 13.6367C4.04137 13.4178 4.14895 12.9552 3.93003 12.6036L2.65666 13.3964ZM6.52969 15.7718C6.23645 15.4793 5.76158 15.4798 5.46903 15.7731C5.17649 16.0663 5.17706 16.5412 5.47031 16.8337L6.52969 15.7718ZM2.75 9.13707C2.75 6.33419 4.00722 4.59507 5.57921 3.99711C7.15546 3.39753 9.35129 3.8302 11.4596 6.0207L12.5404 4.9805C10.1489 2.49583 7.3447 1.72069 5.04591 2.59512C2.74286 3.47116 1.25 5.88785 1.25 9.13707H2.75ZM15.5026 19.4999C16.9949 18.3234 18.7837 16.7461 20.2061 14.9838C21.6126 13.2412 22.75 11.2089 22.75 9.13703H21.25C21.25 10.688 20.3777 12.3829 19.0389 14.0417C17.716 15.6807 16.0239 17.1788 14.574 18.3219L15.5026 19.4999ZM22.75 9.13703C22.75 5.88784 21.2571 3.47115 18.9541 2.59511C16.6553 1.7207 13.8511 2.49583 11.4596 4.9805L12.5404 6.0207C14.6487 3.8302 16.8445 3.39753 18.4208 3.99711C19.9928 4.59506 21.25 6.33418 21.25 9.13703H22.75ZM8.49742 19.4998C9.77172 20.5044 10.6501 21.2359 12 21.2359L12 19.7359C11.2693 19.7359 10.8157 19.4174 9.42605 18.3219L8.49742 19.4998ZM14.574 18.3219C13.1843 19.4174 12.7307 19.7359 12 19.7359L12 21.2359C13.3499 21.2359 14.2283 20.5044 15.5026 19.4999L14.574 18.3219ZM3.93003 12.6036C3.18403 11.4054 2.75 10.2312 2.75 9.13707H1.25C1.25 10.617 1.83054 12.0695 2.65666 13.3964L3.93003 12.6036ZM9.42605 18.3219C8.50908 17.599 7.49093 16.7307 6.52969 15.7718L5.47031 16.8337C6.48347 17.8445 7.54819 18.7515 8.49742 19.4998L9.42605 18.3219Z" fill="#fff"/>
</svg>
HTML,
            MetricType::BLOOD_SUGAR => <<<HTML
<svg class="size-$size" fill="#fff" version="1.1" id="Layer_1" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink"
	 viewBox="0 0 496 496" xml:space="preserve">
<g>
	<g>
		<g>
			<path d="M464,88c-5.856,0-11.272,1.696-16,4.448V80c0-17.648-14.352-32-32-32c-6.632,0-12.8,2.032-17.912,5.496
				C393.712,41.024,381.952,32,368,32c-13.952,0-25.72,9.024-30.088,21.496C332.8,50.032,326.632,48,320,48
				c-14.872,0-27.288,10.24-30.864,24H236.84c-3.824-14.776-11.048-28.16-20.84-39.288V32h-0.648C197.768,12.416,172.336,0,144,0H40
				C17.944,0,0,17.944,0,40v112c0,22.056,17.944,40,40,40h104c28.336,0,53.768-12.416,71.352-32H216v-0.712
				c9.792-11.128,17.016-24.512,20.84-39.288H288v148.688l-8-8V220c0-19.848-16.152-36-36-36c-19.848,0-36,16.152-36,36v78.04
				l41.768,76.568c5.504,10.096,13.84,18.144,24.12,23.28L288,404.944V496h16V395.056l-22.96-11.48
				c-7.336-3.672-13.296-9.416-17.224-16.624L224,293.96V220c0-11.032,8.968-20,20-20c11.032,0,20,8.968,20,20v47.312L284.688,288
				H304V120h16V72h-13.776c2.776-4.76,7.88-8,13.776-8c8.816,0,16,7.184,16,16v136h16V80V64c0-8.816,7.176-16,16-16
				c8.816,0,16,7.184,16,16v16v8v128h16V88v-8c0-8.816,7.176-16,16-16c8.816,0,16,7.184,16,16v40v8v88h16v-88v-8
				c0-8.816,7.176-16,16-16c8.816,0,16,7.184,16,16v240c0,15.248-8.472,28.96-22.112,35.776L448,400.72V496h16v-85.392l1.048-0.52
				C484.144,400.544,496,381.352,496,360V120C496,102.352,481.648,88,464,88z M144,176H40c-13.232,0-24-10.768-24-24V40
				c0-13.232,10.768-24,24-24h104c17.928,0,34.44,6,47.792,16H184c-13.232,0-24,10.768-24,24v80c0,13.232,10.768,24,24,24h7.792
				C178.44,170,161.928,176,144,176z M207.848,144H184c-4.416,0-8-3.584-8-8V56c0-4.416,3.584-8,8-8h23.848
				C217.936,61.392,224,77.984,224,96S217.936,130.608,207.848,144z M304,104h-64.408c0.224-2.648,0.408-5.304,0.408-8
				s-0.184-5.352-0.408-8H304V104z"/>
			<path d="M333.656,266.344l-11.312,11.312l19.88,19.88C358.84,314.168,368,336.256,368,359.768V392h16v-32.232
				c0-27.784-10.824-53.896-30.464-73.536L333.656,266.344z"/>
			<path d="M32,160h112V32H32V160z M48,48h80v96H48V48z"/>
			<rect x="64" y="112" width="16" height="16"/>
			<rect x="96" y="112" width="16" height="16"/>
		</g>
	</g>
</g>
</svg>
HTML,
            MetricType::SPO2 => <<<HTML
<svg fill="#fff" version="1.1" id="Capa_1" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink"
	 class="size-$size" viewBox="0 0 32.12 32.121"
	 xml:space="preserve">
<g>
	<g>
		<path d="M15.377,6.374c-6.926,0-12.56,5.633-12.56,12.56c0,6.926,5.634,12.561,12.56,12.561c6.925,0,12.561-5.636,12.561-12.561
			C27.938,12.008,22.302,6.374,15.377,6.374z M15.377,29.239c-5.683,0-10.306-4.623-10.306-10.308
			c0-5.682,4.623-10.305,10.306-10.305c5.684,0,10.307,4.624,10.307,10.305C25.684,24.616,21.061,29.239,15.377,29.239z"/>
		<circle cx="3.381" cy="7.529" r="3.381"/>
		<circle cx="26.663" cy="6.733" r="2.585"/>
		<circle cx="30.5" cy="2.247" r="1.62"/>
		<circle cx="9.721" cy="2.881" r="1.268"/>
		<path d="M11.761,13.623c-1.572,0-2.798,0.44-3.678,1.32c-0.881,0.881-1.321,2.109-1.321,3.691c0,1.131,0.222,2.073,0.667,2.825
			c0.444,0.755,1.024,1.304,1.74,1.652c0.715,0.346,1.619,0.521,2.711,0.521c1.074,0,1.971-0.201,2.691-0.604
			c0.72-0.404,1.269-0.969,1.651-1.689c0.38-0.726,0.571-1.652,0.571-2.785c0-1.559-0.436-2.771-1.308-3.635
			C14.614,14.054,13.372,13.623,11.761,13.623z M13.273,20.767c-0.353,0.418-0.85,0.627-1.492,0.627
			c-0.626,0-1.119-0.213-1.482-0.641c-0.364-0.428-0.545-1.129-0.545-2.106c0-0.985,0.183-1.692,0.549-2.119
			c0.365-0.427,0.849-0.642,1.453-0.642c0.628,0,1.127,0.211,1.496,0.631c0.367,0.42,0.552,1.086,0.552,1.998
			C13.802,19.597,13.625,20.349,13.273,20.767z"/>
		<path d="M20.087,21.708c0.121-0.098,0.36-0.312,0.72-0.561c0.603-0.426,1.019-0.836,1.248-1.19
			c0.227-0.356,0.342-0.739,0.342-1.128c0-0.367-0.1-0.704-0.299-0.999c-0.201-0.297-0.474-0.519-0.82-0.659
			c-0.35-0.144-0.836-0.217-1.463-0.217c-0.601,0-1.069,0.074-1.41,0.225c-0.338,0.148-0.603,0.364-0.787,0.646
			c-0.186,0.28-0.314,0.671-0.384,1.173l1.783,0.146c0.049-0.361,0.146-0.614,0.291-0.758c0.144-0.142,0.329-0.213,0.557-0.213
			c0.219,0,0.4,0.068,0.545,0.207s0.216,0.305,0.216,0.5c0,0.18-0.073,0.372-0.218,0.572c-0.147,0.201-0.48,0.494-1.002,0.881
			c-0.854,0.635-1.435,1.102-1.745,1.564c-0.31,0.466-0.496,1.408-0.557,1.408h4.876v-1.127h-2.315
			C19.824,22.179,19.966,21.806,20.087,21.708z"/>
	</g>
</g>
</svg>
HTML,
            MetricType::BREASTFEEDING => <<<HTML
<svg fill="#fff" class="size-$size" version="1.1" id="Layer_1" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink"
	 viewBox="0 0 512.001 512.001" xml:space="preserve">
<g>
	<g>
		<path d="M492.989,356.001c0-8.051-6.527-14.577-14.578-14.577H355.557c0.968-2.257,1.266-4.77,0.779-7.23l-7.018-35.457
			c-20.14,8.873-18.9,8.37-20.95,9.1c8.731,8.876,14.123,21.048,14.123,34.482c0,5.49,0,42.299,0,55.608h75.456v109.155
			c0,2.716,2.202,4.919,4.919,4.919h30.739c2.717,0,4.919-2.202,4.919-4.919V397.928h19.888c8.051,0,14.578-6.527,14.578-14.577
			v-27.349H492.989z"/>
	</g>
</g>
<g>
	<g>
		<path d="M257.078,278.959c-18.835,6.481-21.333,7.814-28.035,7.814c-16.724,0-30.536-12.95-31.781-29.476l-19.576-4.732
			l-16.156,81.628c-0.487,2.46-0.187,4.974,0.785,7.23H33.59c-8.051,0-14.578,6.527-14.578,14.577v27.347
			c0,8.051,6.527,14.577,14.578,14.577h19.888v109.155c0,2.716,2.202,4.919,4.919,4.919h30.739c2.717,0,4.919-2.202,4.919-4.919
			V397.924h85.265c0-13.602,0-49.595,0-55.608c0-17.438,9.084-32.746,22.77-41.479c7.632-4.871,16.689-7.705,26.413-7.705
			c11.806,0,23.253,4.174,32.404,12.2c3.388-2.97,7.075-5.458,11.505-7.543L257.078,278.959z"/>
	</g>
</g>
<g>
	<g>
		<path d="M216.146,261.862c2.576,4.785,7.583,7.698,12.898,7.698c3.112,0,4.344-0.654,12.328-3.401L216.146,261.862z"/>
	</g>
</g>
<g>
	<g>
		<path d="M413.638,228.477c-0.491-1.229-9.109-21.92-18.792-43.487c-0.087,0.103-0.167,0.211-0.256,0.314
			c-8.8,10.292-21.619,16.195-35.167,16.195c-13.053,0-25.925-5.575-34.972-15.988l-23.388-15.348
			c-6.768-4.441-15.858-2.556-20.298,4.213c-4.442,6.769-2.555,15.856,4.212,20.298l29.239,19.187l-38.608,16.716
			c-0.355,10.53-5.207,20.68-13.835,27.568l14.374,16.155c-1.31-12.557,3.61-25.19,14.377-32.461
			c7.126-4.813,15.293-8.007,23.8-9.266l49.721-7.351l-57.714,25.423c-11.225,4.944-16.316,18.051-11.372,29.277
			c4.949,11.238,18.067,16.311,29.277,11.372l77.735-34.241C412.926,252.229,418.086,239.59,413.638,228.477z M364.047,225.222
			l0.001-0.003c0,0.001,0.001,0.002,0.001,0.002L364.047,225.222z"/>
	</g>
</g>
<g>
	<g>
		<path d="M359.451,126.209c-15.917,0-28.773,12.755-29.047,28.516c-0.285,16.34,12.889,29.561,29.021,29.561
			c15.906,0,28.773-12.75,29.047-28.516C388.756,139.473,375.628,126.209,359.451,126.209z"/>
	</g>
</g>
<g>
	<g>
		<path d="M228.501,315.667c-14.719,0-26.65,11.932-26.65,26.651v142.934c0,14.719,11.931,26.651,26.65,26.651
			c14.703,0,26.65-11.943,26.65-26.651V342.319C255.151,327.627,243.22,315.667,228.501,315.667z"/>
	</g>
</g>
<g>
	<g>
		<path d="M293.309,315.667c-14.719,0-26.651,11.932-26.651,26.651v142.934c0,14.719,11.932,26.651,26.651,26.651
			c14.719,0,26.651-11.932,26.651-26.651V342.319C319.959,327.599,308.028,315.667,293.309,315.667z"/>
	</g>
</g>
<g>
	<g>
		<path d="M359.117,109.003c-9.478-12.535-24.516-20.267-40.52-20.267h-9.212c-12.155,13.713-29.577,21.763-48.24,21.763
			c-19.18,0-36.419-8.428-48.24-21.764c-22.758,0-39.574,11.866-47.682,28.542c-8.176,16.812-14.691,30.621-35.26,82.625
			c-4.962,12.553,2.337,26.591,15.435,29.758l88.12,21.301c11.923,2.882,23.923-4.449,26.805-16.368
			c2.882-11.922-4.447-23.924-16.368-26.805l-63.196-15.276c4.675-11.546,11.455-28.036,16.605-39.355l-5.34,26.976
			c12.32,2.978,44.976,10.872,55.379,13.387c10.009,2.419,18.063,8.712,22.969,16.898l5.16-1.35
			c-14.692-9.642-18.8-29.44-9.162-44.129c9.718-14.816,29.506-18.763,44.136-9.165l2.75,1.804
			C311.907,131.179,332.875,109.192,359.117,109.003z"/>
	</g>
</g>
<g>
	<g>
		<circle cx="261.14" cy="46.026" r="46.026"/>
	</g>
</g>
</svg>
HTML,
            MetricType::WEIGHT => <<<HTML
<svg class="size-$size" viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg">
<path d="M12.0002 6L11.0064 9M16.5 6C17.8978 6 18.5967 6 19.1481 6.22836C19.8831 6.53284 20.4672 7.11687 20.7716 7.85195C21 8.40326 21 9.10218 21 10.5V16.2C21 17.8802 21 18.7202 20.673 19.362C20.3854 19.9265 19.9265 20.3854 19.362 20.673C18.7202 21 17.8802 21 16.2 21H7.8C6.11984 21 5.27976 21 4.63803 20.673C4.07354 20.3854 3.6146 19.9265 3.32698 19.362C3 18.7202 3 17.8802 3 16.2V10.5C3 9.10218 3 8.40326 3.22836 7.85195C3.53284 7.11687 4.11687 6.53284 4.85195 6.22836C5.40326 6 6.10218 6 7.5 6M10 17H14M10.5415 3H13.4588C14.5397 3 15.0802 3 15.4802 3.18541C16.0136 3.43262 16.4112 3.90199 16.5674 4.46878C16.6845 4.89387 16.5957 5.42698 16.418 6.4932C16.2862 7.28376 16.2203 7.67904 16.0449 7.98778C15.8111 8.39944 15.4388 8.71481 14.9943 8.87778C14.661 9 14.2602 9 13.4588 9H10.5415C9.74006 9 9.33933 9 9.00596 8.87778C8.56146 8.71481 8.18918 8.39944 7.95536 7.98778C7.77999 7.67904 7.71411 7.28376 7.58235 6.4932C7.40465 5.42698 7.3158 4.89387 7.43291 4.46878C7.58906 3.90199 7.98669 3.43262 8.52009 3.18541C8.92014 3 9.46061 3 10.5415 3Z" stroke="#fff" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"/>
</svg>
HTML,
            MetricType::TEMPERATURE => <<<HTML
<svg class="size-$size" viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg">
<path d="M8 15.9998C7.44772 15.9998 7 16.4475 7 16.9998C7 17.5521 7.44772 17.9998 8 17.9998C8.55228 17.9998 9 17.5521 9 16.9998C9 16.4475 8.55228 15.9998 8 15.9998ZM8 15.9998L8.00707 12M8 16.9998L8.00707 17.0069M20 5C20 6.10457 19.1046 7 18 7C16.8954 7 16 6.10457 16 5C16 3.89543 16.8954 3 18 3C19.1046 3 20 3.89543 20 5ZM12 16.9998C12 19.209 10.2091 20.9998 8 20.9998C5.79086 20.9998 4 19.209 4 16.9998C4 15.9854 4.37764 15.0591 5 14.354L5 6C5 4.34315 6.34315 3 8 3C9.65685 3 11 4.34315 11 6V14.354C11.6224 15.0591 12 15.9854 12 16.9998Z" stroke="#fff" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"/>
</svg>
HTML,
            default => 'clipboard',
        };
    }
}
